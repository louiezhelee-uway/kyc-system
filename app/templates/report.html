{% extends "base.html" %}

{% block title %}KYC 验证报告 - 订单 {{ order.taobao_order_id }}{% endblock %}

{% block extra_css %}
<style>
    .status-badge-approved {
        background: #d4edda;
        color: #155724;
    }
    
    .status-badge-rejected {
        background: #f8d7da;
        color: #721c24;
    }
    
    .status-badge-pending {
        background: #fff3cd;
        color: #856404;
    }
</style>
{% endblock %}

{% block content %}
<h1>验证报告</h1>

<div class="info-box">
    <p><strong>订单号:</strong> {{ order.taobao_order_id }}</p>
    <p><strong>买家:</strong> {{ order.buyer_name }}</p>
    <p><strong>验证状态:</strong> 
        <span class="status-badge" style="padding: 4px 8px; border-radius: 4px; font-weight: bold;" class="status-badge-{{ report.verification_result }}">
            {{ report.verification_result.upper() }}
        </span>
    </p>
</div>

{% if report.verification_result == 'approved' %}
<div class="status success">
    ✓ 验证已批准
</div>
<p>恭喜！您的身份验证已通过。您现在可以继续进行后续交易。</p>
{% elif report.verification_result == 'rejected' %}
<div class="status error">
    ✗ 验证未通过
</div>
<p>抱歉，您的身份验证未通过。请检查您提交的信息是否准确，或联系客户服务获取帮助。</p>
{% else %}
<div class="status pending">
    ⏳ 验证中
</div>
<p>您的身份验证正在处理中，请稍候...</p>
{% endif %}

<h2>报告详情</h2>

<div style="background: #f9f9f9; padding: 15px; border-radius: 6px; margin: 15px 0;">
    <p><strong>报告生成时间:</strong> {{ report.created_at.strftime('%Y-%m-%d %H:%M:%S') }}</p>
    <p><strong>报告ID:</strong> {{ report.id }}</p>
    <p><strong>订单金额:</strong> ¥{{ order.order_amount or '0.00' }}</p>
    <p><strong>订单平台:</strong> {{ order.platform }}</p>
</div>

{% if report.pdf_path %}
<center style="margin-top: 30px;">
    <a href="/report/{{ order.id }}/download" class="button">下载 PDF 报告</a>
</center>
{% endif %}

<div class="footer" style="margin-top: 50px;">
    <p>此报告由 KYC 自动验证系统生成。</p>
    <p>问题？<a href="mailto:support@example.com" style="color: #667eea; text-decoration: none;">联系支持</a></p>
</div>
{% endblock %}

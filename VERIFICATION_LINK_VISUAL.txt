â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    ğŸ”— KYC éªŒè¯é“¾æ¥ç”Ÿæˆ - å¯è§†åŒ–æµç¨‹å›¾                             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


ã€ç¬¬ä¸€é˜¶æ®µã€‘è®¢å•æ¥æ”¶å’Œå¤„ç†
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  æ·˜å®/é—²é±¼           â”‚
   â”‚  è®¢å•åˆ›å»º           â”‚
   â”‚                     â”‚
   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
   â”‚  â”‚  order_id    â”‚  â”‚
   â”‚  â”‚  buyer_name  â”‚  â”‚
   â”‚  â”‚  buyer_email â”‚  â”‚
   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â”‚ Webhook é€šçŸ¥
                â†“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  KYC ç³»ç»Ÿ (app/routes/webhook.py)           â”‚
   â”‚  POST /webhook/taobao/order                 â”‚
   â”‚                                             â”‚
   â”‚  æ¥æ”¶ Webhook è¯·æ±‚                          â”‚
   â”‚  â”œâ”€ éªŒè¯ HMAC-SHA256 ç­¾å                  â”‚
   â”‚  â”œâ”€ ç§˜é’¥: WEBHOOK_SECRET                   â”‚
   â”‚  â””â”€ ç­¾åæœ‰æ•ˆ âœ“                              â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â”‚ ç­¾åé€šè¿‡
                â†“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  æ•°æ®åº“ (PostgreSQL)                        â”‚
   â”‚  è¡¨: orders                                 â”‚
   â”‚                                             â”‚
   â”‚  INSERT INTO orders (                       â”‚
   â”‚    order_id,                                â”‚
   â”‚    buyer_name,                              â”‚
   â”‚    buyer_email,                             â”‚
   â”‚    buyer_phone,                             â”‚
   â”‚    order_amount,                            â”‚
   â”‚    status = 'pending'                       â”‚
   â”‚  )                                          â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â”‚
                â†“


ã€ç¬¬äºŒé˜¶æ®µã€‘ä»¤ç‰Œå’Œ Sumsub é›†æˆ
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  1ï¸âƒ£ ç”ŸæˆéªŒè¯ä»¤ç‰Œ                               â”‚
   â”‚  (app/utils/token_generator.py)                  â”‚
   â”‚                                                  â”‚
   â”‚  token = secrets.token_hex(16)                   â”‚
   â”‚                                                  â”‚
   â”‚  ç”Ÿæˆ: a3f8c2e91d7b4e5f6c8a9b0c1d2e3f4a        â”‚
   â”‚        (32 å­—ç¬¦å”¯ä¸€ä»¤ç‰Œ)                         â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â”‚
                â†“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  2ï¸âƒ£ è°ƒç”¨ Sumsub API (app/services/sumsub_service.py)     â”‚
   â”‚                                                          â”‚
   â”‚  POST https://api.sumsub.com/resources/applicants       â”‚
   â”‚                                                          â”‚
   â”‚  è¯·æ±‚å¤´:                                                â”‚
   â”‚  â”œâ”€ Authorization: HMAC-SHA256 ç­¾å                     â”‚
   â”‚  â”œâ”€ X-App-Token: SUMSUB_API_TOKEN                       â”‚
   â”‚  â””â”€ Content-Type: application/json                      â”‚
   â”‚                                                          â”‚
   â”‚  è¯·æ±‚ä½“:                                                â”‚
   â”‚  {                                                      â”‚
   â”‚    "applicantEmail": "buyer@example.com",              â”‚
   â”‚    "applicantPhone": "13800138000",                     â”‚
   â”‚    "applicantFirstName": "å¼ ",                         â”‚
   â”‚    "applicantLastName": "ä¸‰"                           â”‚
   â”‚  }                                                      â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â”‚ Sumsub API å“åº”
                â†“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Sumsub å“åº”                                      â”‚
   â”‚                                                  â”‚
   â”‚  {                                               â”‚
   â”‚    "id": "sumsub_applicant_c939a5de8bf8d12c",   â”‚
   â”‚    "applicantId": "...",                         â”‚
   â”‚    ...                                           â”‚
   â”‚  }                                               â”‚
   â”‚                                                  â”‚
   â”‚  âœ“ åˆ›å»º Applicant è®°å½•æˆåŠŸ                      â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â”‚
                â†“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  3ï¸âƒ£ ç”Ÿæˆ Access Token                                â”‚
   â”‚                                                        â”‚
   â”‚  POST https://api.sumsub.com/resources/applicants/    â”‚
   â”‚        {applicantId}/tokens                           â”‚
   â”‚                                                        â”‚
   â”‚  å“åº”:                                                 â”‚
   â”‚  {                                                    â”‚
   â”‚    "token": "c327a5187a5e5f9a22a232e5d158f397..."   â”‚
   â”‚  }                                                    â”‚
   â”‚                                                        â”‚
   â”‚  Access Token é•¿åº¦: 64+ å­—ç¬¦                          â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â”‚
                â†“


ã€ç¬¬ä¸‰é˜¶æ®µã€‘éªŒè¯é“¾æ¥ç”Ÿæˆå’Œå­˜å‚¨
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  4ï¸âƒ£ ç”Ÿæˆ Sumsub Web SDK é“¾æ¥                         â”‚
   â”‚  (app/services/sumsub_service.py - ç¬¬ 82 è¡Œ)         â”‚
   â”‚                                                      â”‚
   â”‚  verification_link = (                               â”‚
   â”‚    "https://api.sumsub.com/sdk/applicant"           â”‚
   â”‚    "?token={access_token}"                           â”‚
   â”‚  )                                                   â”‚
   â”‚                                                      â”‚
   â”‚  å®Œæ•´é“¾æ¥:                                           â”‚
   â”‚  https://api.sumsub.com/sdk/applicant?token=        â”‚
   â”‚  c327a5187a5e5f9a22a232e5d158f397...               â”‚
   â”‚                                                      â”‚
   â”‚  ç”¨é€”: å®é™…çš„èº«ä»½éªŒè¯é¡µé¢                           â”‚
   â”‚  æ˜¾ç¤º: åœ¨ HTML æ¨¡æ¿ä¸­çš„æŒ‰é’®é“¾æ¥                      â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â”‚
                â†“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  5ï¸âƒ£ åˆ›å»ºæ•°æ®åº“è®°å½•                                   â”‚
   â”‚  è¡¨: verifications                                  â”‚
   â”‚                                                      â”‚
   â”‚  INSERT INTO verifications (                         â”‚
   â”‚    order_id,                 // å…³è”è®¢å•              â”‚
   â”‚    sumsub_applicant_id,      // Sumsub ID            â”‚
   â”‚    verification_token,        // â­ ä¹°å®¶é“¾æ¥ç”¨ä»¤ç‰Œ   â”‚
   â”‚    verification_link,         // â­ Sumsub SDK é“¾æ¥  â”‚
   â”‚    status,                   // pending               â”‚
   â”‚    created_at                // å½“å‰æ—¶é—´              â”‚
   â”‚  )                                                   â”‚
   â”‚                                                      â”‚
   â”‚  âœ“ éªŒè¯è®°å½•åˆ›å»ºæˆåŠŸ                                 â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â”‚
                â†“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  6ï¸âƒ£ ç”Ÿæˆä¹°å®¶éªŒè¯é“¾æ¥                                â”‚
   â”‚  (app/routes/webhook.py)                            â”‚
   â”‚                                                      â”‚
   â”‚  BASE_URL = "http://localhost:5000"                 â”‚
   â”‚  ROUTE = "/verify"                                  â”‚
   â”‚  TOKEN = "a3f8c2e91d7b4e5f6c8a9b0c1d2e3f4a"        â”‚
   â”‚                                                      â”‚
   â”‚  buyer_link = (                                      â”‚
   â”‚    f"{BASE_URL}/verify/{verification_token}"        â”‚
   â”‚  )                                                   â”‚
   â”‚                                                      â”‚
   â”‚  å®Œæ•´é“¾æ¥:                                           â”‚
   â”‚  http://localhost:5000/verify/                      â”‚
   â”‚  a3f8c2e91d7b4e5f6c8a9b0c1d2e3f4a                 â”‚
   â”‚                                                      â”‚
   â”‚  âœ… è¿™æ˜¯å‘é€ç»™ä¹°å®¶çš„é“¾æ¥ï¼                          â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â”‚ å“åº”ç»™è°ƒç”¨æ–¹
                â†“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  è¿”å›å“åº”                                             â”‚
   â”‚                                                      â”‚
   â”‚  {                                                   â”‚
   â”‚    "success": true,                                  â”‚
   â”‚    "verification_token": "a3f8c2e91d...",           â”‚
   â”‚    "verification_link": "http://localhost:5000/...", â”‚
   â”‚    "message": "è®¢å•å·²å¤„ç†ï¼Œé“¾æ¥å·²ç”Ÿæˆ"              â”‚
   â”‚  }                                                   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â”‚
                â†“


ã€ç¬¬å››é˜¶æ®µã€‘å‘é€ç»™ä¹°å®¶
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  å‘é€ç»™ä¹°å®¶                     â”‚
   â”‚  (é‚®ä»¶/çŸ­ä¿¡/æ¶ˆæ¯)               â”‚
   â”‚                                 â”‚
   â”‚  å°Šæ•¬çš„å¼ ä¸‰:                     â”‚
   â”‚                                 â”‚
   â”‚  æ‚¨çš„è®¢å•å·²åˆ›å»ºï¼Œè¯·ç‚¹å‡»ä»¥ä¸‹     â”‚
   â”‚  é“¾æ¥å®Œæˆèº«ä»½éªŒè¯:              â”‚
   â”‚                                 â”‚
   â”‚  ğŸ‘‰ http://localhost:5000/verify â”‚
   â”‚     /a3f8c2e91d7b4e5f6c8a9b0c1â”‚
   â”‚     d2e3f4a                    â”‚
   â”‚                                 â”‚
   â”‚  éªŒè¯è¿‡ç¨‹éœ€è¦ 5-10 åˆ†é’Ÿ         â”‚
   â”‚                                 â”‚
   â”‚  æ„Ÿè°¢æ‚¨çš„é…åˆ                   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â”‚ ä¹°å®¶æ”¶åˆ°é“¾æ¥å¹¶ç‚¹å‡»
                â†“


ã€ç¬¬äº”é˜¶æ®µã€‘éªŒè¯é¡µé¢æ˜¾ç¤º
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  7ï¸âƒ£ ä¹°å®¶è®¿é—®éªŒè¯é¡µé¢                               â”‚
   â”‚  GET /verify/a3f8c2e91d7b4e5f6c8a9b0c1d2e3f4a    â”‚
   â”‚                                                    â”‚
   â”‚  è·¯ç”±: app/routes/verification.py                 â”‚
   â”‚                                                    â”‚
   â”‚  ç³»ç»Ÿæµç¨‹:                                         â”‚
   â”‚  1. æŸ¥è¯¢éªŒè¯è®°å½•                                   â”‚
   â”‚     SELECT * FROM verifications                   â”‚
   â”‚     WHERE verification_token = '...'              â”‚
   â”‚                                                    â”‚
   â”‚  2. è·å–å…³è”çš„è®¢å•ä¿¡æ¯                             â”‚
   â”‚     SELECT * FROM orders WHERE id = ...           â”‚
   â”‚                                                    â”‚
   â”‚  3. æ¸²æŸ“ HTML æ¨¡æ¿                                â”‚
   â”‚     app/templates/verification.html              â”‚
   â”‚                                                    â”‚
   â”‚  4. ä¼ å…¥æ•°æ®:                                      â”‚
   â”‚     - order: è®¢å•ä¿¡æ¯                              â”‚
   â”‚     - verification: éªŒè¯ä¿¡æ¯                       â”‚
   â”‚     - verification_link: Sumsub é“¾æ¥             â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â”‚ è¿”å› HTML é¡µé¢
                â†“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  éªŒè¯é¡µé¢ HTML ç•Œé¢                                â”‚
   â”‚                                                  â”‚
   â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—  â”‚
   â”‚  â•‘  èº«ä»½éªŒè¯                              â•‘  â”‚
   â”‚  â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£  â”‚
   â”‚  â•‘                                           â•‘  â”‚
   â”‚  â•‘  è®¢å•å·: taobao_20251125_123456           â•‘  â”‚
   â”‚  â•‘  ä¹°å®¶: å¼ ä¸‰                               â•‘  â”‚
   â”‚  â•‘  é‚®ç®±: zhangsan@example.com               â•‘  â”‚
   â”‚  â•‘                                           â•‘  â”‚
   â”‚  â•‘  ä¸ºäº†å®Œæˆæ‚¨çš„è®¢å•ï¼Œè¯·è¿›è¡Œèº«ä»½éªŒè¯        â•‘  â”‚
   â”‚  â•‘  éªŒè¯è¿‡ç¨‹éœ€è¦ 5-10 åˆ†é’Ÿ                   â•‘  â”‚
   â”‚  â•‘  éœ€è¦ä¸Šä¼ èº«ä»½è¯ä»¶å¹¶è¿›è¡Œäººè„¸è¯†åˆ«          â•‘  â”‚
   â”‚  â•‘  æ‰€æœ‰æ•°æ®å·²åŠ å¯†ï¼Œæ‚¨çš„éšç§å·²å—ä¿æŠ¤        â•‘  â”‚
   â”‚  â•‘                                           â•‘  â”‚
   â”‚  â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â•‘  â”‚
   â”‚  â•‘  â”‚   ğŸ”˜ å¼€å§‹éªŒè¯                  â”‚    â•‘  â”‚
   â”‚  â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â•‘  â”‚
   â”‚  â•‘                                           â•‘  â”‚
   â”‚  â•‘  (ç‚¹å‡»æ­¤æŒ‰é’®è¿›å…¥ Sumsub èº«ä»½éªŒè¯)        â•‘  â”‚
   â”‚  â•‘                                           â•‘  â”‚
   â”‚  â•‘  Sumsub éšç§æ”¿ç­–: https://sumsub.com/... â•‘  â”‚
   â”‚  â•‘                                           â•‘  â”‚
   â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
   â”‚                                                  â”‚
   â”‚  æ¨¡æ¿æ–‡ä»¶: app/templates/verification.html     â”‚
   â”‚                                                  â”‚
   â”‚  å…³é”®ä»£ç :                                       â”‚
   â”‚  <a href="{{ verification_link }}"              â”‚
   â”‚     class="button">                             â”‚
   â”‚    å¼€å§‹éªŒè¯                                      â”‚
   â”‚  </a>                                           â”‚
   â”‚                                                  â”‚
   â”‚  verification_link çš„å€¼:                         â”‚
   â”‚  https://api.sumsub.com/sdk/applicant?token=   â”‚
   â”‚  c327a5187a5e5f9a22a232e5d158f397...           â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â”‚ ä¹°å®¶ç‚¹å‡»"å¼€å§‹éªŒè¯"æŒ‰é’®
                â†“


ã€ç¬¬å…­é˜¶æ®µã€‘Sumsub èº«ä»½éªŒè¯
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  8ï¸âƒ£ è·³è½¬åˆ° Sumsub Web SDK                            â”‚
   â”‚                                                      â”‚
   â”‚  é“¾æ¥:                                               â”‚
   â”‚  https://api.sumsub.com/sdk/applicant?token=        â”‚
   â”‚  c327a5187a5e5f9a22a232e5d158f397...               â”‚
   â”‚                                                      â”‚
   â”‚  Sumsub é¡µé¢æ˜¾ç¤º:                                   â”‚
   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
   â”‚  â”‚  Sumsub èº«ä»½éªŒè¯                    â”‚           â”‚
   â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”‚
   â”‚  â”‚                                     â”‚           â”‚
   â”‚  â”‚  1ï¸âƒ£ ä¸Šä¼ èº«ä»½è¯ä»¶                   â”‚           â”‚
   â”‚  â”‚     - æŠ¤ç…§/é©¾ç…§/èº«ä»½è¯              â”‚           â”‚
   â”‚  â”‚                                     â”‚           â”‚
   â”‚  â”‚  2ï¸âƒ£ å®Œæˆäººè„¸è¯†åˆ«                   â”‚           â”‚
   â”‚  â”‚     - æ‹ç…§æˆ–è§†é¢‘å½•åˆ¶                â”‚           â”‚
   â”‚  â”‚                                     â”‚           â”‚
   â”‚  â”‚  3ï¸âƒ£ å¡«å†™ä¸ªäººä¿¡æ¯                   â”‚           â”‚
   â”‚  â”‚     - åå­—ã€å‡ºç”Ÿæ—¥æœŸç­‰              â”‚           â”‚
   â”‚  â”‚                                     â”‚           â”‚
   â”‚  â”‚  4ï¸âƒ£ æäº¤éªŒè¯                       â”‚           â”‚
   â”‚  â”‚     - Sumsub å¼€å§‹å®¡æ ¸               â”‚           â”‚
   â”‚  â”‚                                     â”‚           â”‚
   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
   â”‚                                                      â”‚
   â”‚  ä¹°å®¶åœ¨ Sumsub ä¸Šå®ŒæˆéªŒè¯...                         â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â”‚ éªŒè¯å®Œæˆ
                â†“


ã€ç¬¬ä¸ƒé˜¶æ®µã€‘éªŒè¯ç»“æœå’Œå›è°ƒ
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  9ï¸âƒ£ Sumsub å›è°ƒ                                      â”‚
   â”‚                                                      â”‚
   â”‚  Sumsub éªŒè¯å®¡æ ¸å®Œæˆå:                              â”‚
   â”‚                                                      â”‚
   â”‚  POST http://localhost:5000/webhook/sumsub/verification â”‚
   â”‚                                                      â”‚
   â”‚  è¯·æ±‚ä½“:                                            â”‚
   â”‚  {                                                  â”‚
   â”‚    "applicantId": "sumsub_applicant_c939...",      â”‚
   â”‚    "reviewStatus": "approved",  // æˆ– rejected     â”‚
   â”‚    "reviewAnswer": "GREEN",     // GREEN/RED/GREY  â”‚
   â”‚    "timestamp": 1725350640                         â”‚
   â”‚  }                                                  â”‚
   â”‚                                                      â”‚
   â”‚  è·¯ç”±: app/routes/webhook.py > sumsub_webhook()    â”‚
   â”‚                                                      â”‚
   â”‚  éªŒè¯ç­¾åâœ“ â†’ æŸ¥è¯¢éªŒè¯è®°å½• â†’ æ›´æ–°çŠ¶æ€                â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â”‚ æ›´æ–°æ•°æ®åº“
                â†“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  ğŸ”Ÿ æ›´æ–°éªŒè¯çŠ¶æ€                                      â”‚
   â”‚                                                      â”‚
   â”‚  UPDATE verifications                               â”‚
   â”‚  SET status = 'approved',  -- æˆ– 'rejected'         â”‚
   â”‚      completed_at = NOW()                           â”‚
   â”‚  WHERE sumsub_applicant_id = 'sumsub_applicant_...' â”‚
   â”‚                                                      â”‚
   â”‚  âœ“ éªŒè¯çŠ¶æ€å·²æ›´æ–°                                   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â”‚
                â†“


ã€ç¬¬å…«é˜¶æ®µã€‘æŠ¥å‘Šç”Ÿæˆ
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  1ï¸âƒ£1ï¸âƒ£ ç”Ÿæˆ PDF æŠ¥å‘Š                                 â”‚
   â”‚                                                      â”‚
   â”‚  æ–‡ä»¶: app/services/report_service.py               â”‚
   â”‚  å‡½æ•°: generate_report_pdf()                        â”‚
   â”‚                                                      â”‚
   â”‚  æŠ¥å‘Šå†…å®¹:                                           â”‚
   â”‚  â”œâ”€ è®¢å•å·                                          â”‚
   â”‚  â”œâ”€ ä¹°å®¶ä¿¡æ¯                                        â”‚
   â”‚  â”œâ”€ éªŒè¯çŠ¶æ€                                        â”‚
   â”‚  â”œâ”€ éªŒè¯æ—¶é—´                                        â”‚
   â”‚  â”œâ”€ KYC éªŒè¯è¯¦æƒ…                                   â”‚
   â”‚  â””â”€ ç”Ÿæˆæ—¶é—´æˆ³                                      â”‚
   â”‚                                                      â”‚
   â”‚  âœ“ PDF æŠ¥å‘Šå·²ç”Ÿæˆ                                   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â”‚
                â†“


ã€æœ€ç»ˆã€‘å®ŒæˆçŠ¶æ€
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  æµç¨‹å®Œæˆï¼                                          â”‚
   â”‚                                                      â”‚
   â”‚  ğŸ“Š æœ€ç»ˆçŠ¶æ€:                                        â”‚
   â”‚                                                      â”‚
   â”‚  Order:                                              â”‚
   â”‚  â”œâ”€ ID: taobao_20251125_123456                      â”‚
   â”‚  â”œâ”€ Status: completed                               â”‚
   â”‚  â”œâ”€ Buyer: å¼ ä¸‰                                      â”‚
   â”‚  â””â”€ Amount: Â¥299.99                                 â”‚
   â”‚                                                      â”‚
   â”‚  Verification:                                       â”‚
   â”‚  â”œâ”€ Token: a3f8c2e91d7b4e5f6c8a9b0c1d2e3f4a        â”‚
   â”‚  â”œâ”€ Status: approved                                â”‚
   â”‚  â”œâ”€ Created: 2025-11-25 22:15:20                    â”‚
   â”‚  â””â”€ Completed: 2025-11-25 22:18:45                  â”‚
   â”‚                                                      â”‚
   â”‚  Report:                                             â”‚
   â”‚  â”œâ”€ URL: http://localhost:5000/report/taobao_...   â”‚
   â”‚  â”œâ”€ Download: http://localhost:5000/report/.../    â”‚
   â”‚  â”‚            download                              â”‚
   â”‚  â””â”€ Status: âœ… å·²ç”Ÿæˆ                               â”‚
   â”‚                                                      â”‚
   â”‚  å¯ç”¨çš„ API ç«¯ç‚¹:                                    â”‚
   â”‚  â”œâ”€ GET /verify/{token} - éªŒè¯é¡µé¢                 â”‚
   â”‚  â”œâ”€ GET /verify/status/{token} - éªŒè¯çŠ¶æ€          â”‚
   â”‚  â”œâ”€ GET /report/{order_id} - æŸ¥çœ‹æŠ¥å‘Š              â”‚
   â”‚  â””â”€ GET /report/{order_id}/download - ä¸‹è½½æŠ¥å‘Š     â”‚
   â”‚                                                      â”‚
   â”‚  âœ… æ•´ä¸ª KYC æµç¨‹å®Œæˆï¼                             â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  ğŸ“Œ å…³é”®æç¤º:                                                                       â•‘
â•‘                                                                                    â•‘
â•‘  1ï¸âƒ£ ä¹°å®¶é“¾æ¥ (å‘é€ç»™ä¹°å®¶):                                                        â•‘
â•‘     http://localhost:5000/verify/{verification_token}                             â•‘
â•‘     - ç®€å•æ˜“è®°                                                                     â•‘
â•‘     - æœ¬åœ°åº”ç”¨é“¾æ¥                                                                 â•‘
â•‘     - æ˜¾ç¤ºè®¢å•ä¿¡æ¯å’ŒéªŒè¯æŒ‰é’®                                                       â•‘
â•‘                                                                                    â•‘
â•‘  2ï¸âƒ£ Sumsub SDK é“¾æ¥ (åœ¨éªŒè¯é¡µé¢ä¸Š):                                              â•‘
â•‘     https://api.sumsub.com/sdk/applicant?token={access_token}                     â•‘
â•‘     - Sumsub å®˜æ–¹é“¾æ¥                                                              â•‘
â•‘     - å®é™…èº«ä»½éªŒè¯è¡¨å•                                                             â•‘
â•‘     - éœ€è¦è¯ä»¶å’Œäººè„¸è¯†åˆ«                                                           â•‘
â•‘                                                                                    â•‘
â•‘  3ï¸âƒ£ æ•°æ®ä¿å­˜ä½ç½®:                                                                 â•‘
â•‘     - ä»¤ç‰Œ: app/utils/token_generator.py                                          â•‘
â•‘     - é“¾æ¥ç”Ÿæˆ: app/services/sumsub_service.py (ç¬¬ 82 è¡Œ)                        â•‘
â•‘     - è·¯ç”±å¤„ç†: app/routes/verification.py                                        â•‘
â•‘     - æ¨¡æ¿æ˜¾ç¤º: app/templates/verification.html                                   â•‘
â•‘                                                                                    â•‘
â•‘  4ï¸âƒ£ æµç¨‹å®Œå…¨è‡ªåŠ¨åŒ–ï¼Œæ— éœ€äººå·¥å¹²é¢„                                                  â•‘
â•‘                                                                                    â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
